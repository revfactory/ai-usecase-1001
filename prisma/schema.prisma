// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// ì‚°ì—… ë¶„ì•¼ í…Œì´ë¸”
model Industry {
  id       String    @id // automotive_logistics, business_services, etc.
  name     String    // ìë™ì°¨ ë° ë¬¼ë¥˜, ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤, etc.
  color    String    // #FF6B6B
  icon     String    // ğŸš—
  useCases UseCase[]

  @@map("industries")
}

// ì—ì´ì „íŠ¸ ìœ í˜• í…Œì´ë¸”
model AgentType {
  id          String    @id // customer_agent, employee_agent, etc.
  name        String    // ê³ ê° ì—ì´ì „íŠ¸, ì§ì› ì—ì´ì „íŠ¸, etc.
  icon        String    // ğŸ‘¤
  description String
  useCases    UseCase[]

  @@map("agent_types")
}

// ê¸°ìˆ  íƒœê·¸ í…Œì´ë¸”
model Technology {
  id       Int                 @id @default(autoincrement())
  name     String              @unique
  useCases UseCaseTechnology[]

  @@map("technologies")
}

// UseCase-Technology ë‹¤ëŒ€ë‹¤ ê´€ê³„ í…Œì´ë¸”
model UseCaseTechnology {
  useCaseId    String
  technologyId Int
  useCase      UseCase    @relation(fields: [useCaseId], references: [id], onDelete: Cascade)
  technology   Technology @relation(fields: [technologyId], references: [id], onDelete: Cascade)

  @@id([useCaseId, technologyId])
  @@map("usecase_technologies")
}

// ì‚¬ìš© ì‚¬ë¡€ í…Œì´ë¸” (ë©”ì¸)
model UseCase {
  id           String              @id // auto-cust-1, etc.
  company      String              // íšŒì‚¬ëª…
  industryId   String
  agentTypeId  String
  summary      String              // ì‚¬ë¡€ ìš”ì•½ (ê¸°ë³¸, ë ˆê±°ì‹œ)
  summaryKo    String?             // í•œêµ­ì–´ ìš”ì•½
  summaryEn    String?             // ì˜ì–´ ìš”ì•½
  metrics      String?             // ì„±ê³¼ ì§€í‘œ (ì„ íƒ)
  isNew        Boolean             @default(false)
  createdAt    DateTime            @default(now())
  updatedAt    DateTime            @updatedAt

  industry     Industry            @relation(fields: [industryId], references: [id])
  agentType    AgentType           @relation(fields: [agentTypeId], references: [id])
  technologies UseCaseTechnology[]

  @@index([industryId])
  @@index([agentTypeId])
  @@index([isNew])
  @@map("usecases")
}
